/* Spotetrack
 * spotedis + node.js
 * (c) 2014 David (daXXog) Volm ><> + + + <><
 * Released under Apache License, Version 2.0:
 * http://www.apache.org/licenses/LICENSE-2.0.html  
 */ !function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spotetrack=e()}(this,function(){var t,e=require("redis"),i=require("events").EventEmitter,n=require("util").inherits;return t=function(t,i){this.clients=[e.createClient(),e.createClient(),e.createClient()],this.rlist="string"==typeof t?t:"spotedis",this.uri=i,this.connect()},n(t,i),t.prototype.connect=function(){var t=this;this.clients[0].on("message",function(e,i){t.emit("data",new Buffer(i))}),this.clients[0].subscribe(this.uri+":data"),this.clients[2].rpush(this.rlist,this.uri,function(){t.clients[2].quit()})},t});